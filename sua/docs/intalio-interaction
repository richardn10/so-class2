Interaction protocol between Intalio and SUA (Switched On Upload Agent)
=======================================================================

Explanation of terms
--------------------
Correlation id	->	An id for one media item. Provided by Intalio


Communication from Intalio to SUA
---------------------------------
Whenever an user/admin want to upload media (images/videos) related to sponsering, Intalio provides a link to SUA. This link must be made in the following way <a href='http://suaserver/upload?correlationid=[correlationid]&filetype=[filetype]&timestamp=[timestamp]&token=[token]" target="_blank">link</a>. The words in brackets have to be replaced with their appropriate values. 
[filetype] = image or video, indication the media type to be uploaded
[correlationid] An id generated by Intalio. Every media item must have a unique id
[timestamp] The current unix timestamp. Make sure the same timestamp is used for the token
[token] A security token. The token is build up in the following way sha256($key . $correlationId . $timestamp . "INTALIOTOSUA"). The key is a secret shared by both systems. The timestamp and correlation id are the same as the parameters provided to the url. An example: key=aeifckei correlationid=9485 timestamp=1262871456 than the token = sha256(aeifckei94851262871456INTALIOTOSUA) = 2c327ca87df54eda0e11a9a1cec288f2d302f29a85cee6ba78f82b60b3bf22c8
 

Communication from SUA to Intalio
---------------------------------
When SUA has finished uploading a media item, it reports this to Intalio. The format must still be determined, but this are the parameters that SUA will report back.
[correlationid] See above
[filetype] = image or video
[fileservice] = ftp or youtube, this is provided to anticipating a switch of service in the future
[fileid] In case of ftp the filename (for example a4rie8fi.jpg), in case of youtube the video id (for example 2wzhJLiCB0I)
[timestamp] The current unix timestamp.
[token] Security token. Same as in the communication from Intalio to SUA, but now the signature is sha256($key . $correlationId . $timestamp . "SUATOINTALIO")


General comments about Token Validation
---------------------------------------
Whenever SUA or Intalio receives a token, it must validate it. This is simply done by constructing the token itself with the provided parameters and checking or the constructed token and provided token are the same. Also the timestamp must be validated. Any timestamp +/- 15 minutes (900 seconds) is accepted.

